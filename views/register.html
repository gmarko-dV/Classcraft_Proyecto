<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registrar - Mi Classcraft</title>
</head>
<body>
  <h1>Formulario de Registro</h1>
  <form action="/register" method="POST">
    <label for="first_name">Nombre:</label>
    <input type="text" name="first_name" required><br>

    <label for="last_name">Apellido:</label>
    <input type="text" name="last_name" required><br>

    <label for="email">Correo electrónico:</label>
    <input type="email" name="email" required><br>

    <label for="password">Contraseña:</label>
    <input type="password" name="password" id="password" required><br>

    <label for="confirm_password">Confirmar Contraseña:</label>
    <input type="password" name="confirm_password" id="confirm_password" required><br>

    <label for="role">Rol:</label>
    <select name="role" id="role" required onchange="toggleSubjectField()">
      <option value="alumno">Alumno</option>
      <option value="profesor">Profesor</option>
    </select><br>

    <!-- Campo para que el profesor ingrese el nombre de la asignatura -->
    <div id="subject_field" style="display: none;">
      <label for="subject">Asignatura:</label>
      <input type="text" name="subject"><br>
    </div>

    <button type="submit">Registrar</button>
  </form>

  <script>
    // Función para habilitar o deshabilitar el campo de asignatura
    function toggleSubjectField() {
      const role = document.getElementById('role').value;
      const subjectField = document.getElementById('subject_field');
      
      if (role === 'profesor') {
        subjectField.style.display = 'block'; // Muestra el campo para asignatura
      } else {
        subjectField.style.display = 'none'; // Oculta el campo para asignatura
      }
    }

    // Verificar que las contraseñas coincidan antes de enviar el formulario
    document.querySelector('form').addEventListener('submit', function(event) {
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirm_password').value;
      
      if (password !== confirmPassword) {
        alert('Las contraseñas no coinciden');
        event.preventDefault(); // Prevenir el envío del formulario si las contraseñas no coinciden
      }
    });

    // Llamar a la función para configurar el campo de asignatura al cargar la página
    window.onload = function() {
      toggleSubjectField(); // Asegúrate de que el campo de asignatura esté visible/oculto según el rol
    };
  </script>
</body>
</html>
