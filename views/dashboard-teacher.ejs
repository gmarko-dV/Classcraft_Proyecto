<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi Classcraft - Dashboard Profesor</title>
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="/dashboard">Dashboard</a></li>
        <li><a href="/logout">Cerrar sesión</a></li>
        <li><a href="/store">Tienda</a></li>

        <% if (user.role === 'profesor') { %>
          <li><a href="/create-class">Crear Clase</a></li>
          <li><a href="/add-student">Agregar Estudiante</a></li>
          <li><a href="/roulette">Jugar Ruleta</a></li>
        <% } %>
      </ul>
    </nav>
  </header>

  <section class="user-info">
    <h1>Bienvenido, <%= user.first_name %> <%= user.last_name %></h1>
    <p>Rol: <%= user.role %></p>

    <img src="/images/professor-profile.png" alt="Imagen de perfil del profesor" width="150" style="border-radius: 50%;"> 

    <p>Asignatura: <%= subject || 'Sin asignatura asignada' %></p>
  </section>

  <h2>Mis Clases</h2>

  <% if (showCreateClassButton) { %>
    <p><%= message %></p>
    <a href="/create-class">Crear una nueva clase</a>
  <% } else { %>
    <% studentsByClass.forEach(classGroup => { %>
      <div class="class">
        <h3>Clase: <%= classGroup.class.nombre %> - <%= classGroup.class.asignatura %></h3>

        <% classGroup.sections.forEach(classSection => { %>
          <h4>Sección: <%= classSection.section.nombre %></h4>

          <h5>Estudiantes:</h5>
          <ul>
            <% classSection.students.forEach(student => { %>
              <li>
                <%= student.nombre %> <%= student.apellido %>
                <a href="/edit-student-assignment/<%= student.student_id %>">Editar Asignación</a>
              </li>
            <% }) %>
          </ul>
        <% }) %>
      </div>
    <% }) %>
  <% } %>

  <footer>
    <p>&copy; 2025 Mi Classcraft. Todos los derechos reservados.</p>
  </footer>
</body>
</html>
